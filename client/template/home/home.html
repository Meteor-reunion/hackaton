<template name="home">
  {{#ionView}}
    {{#ionContent class="rubyonic-pane login-screen"}}
    {{#if currentGame}}
      {{> game }}
        {{else}}
        {{#ionList}}
        {{#ionItem buttonRight=true}}
         <button class="joinGame">{{_ "Join Game"}}</button>
 {{/ionItem}}
         {{/ionList}}
      {{/if}}

    {{/ionContent}}
  {{/ionView}}
</template>

<template name="game">
  {{#with game}}
    <div class="heading">
      <div class="player player1">
        <span class="playerName">{{username game.players.[0].userId}}</span> (<span class="rank">{{rank game.players.[0].userId}}</span>)
        <div class="playerScore">
          <span class="score">{{game.players.[0].score}}</span>
        </div>
      </div>
      <div class="timer">
        <span class="counter">{{timer}}</span>
      </div>
      <div class="player player2">
          <span class="playerName">{{username game.players.[1].userId}}</span> (<span class="rank">{{rank game.players.[1].userId}}</span>)
          <div class="playerScore">
            <span class="score">{{game.players.[1].score}}</span>
          </div>
      </div>
    </div>

    {{#if gameInProgress game}}
      <div class="bullets">
        {{#each key_value game.bullets}}
          <div class="bullet value{{value}}" data-position="{{key}}"></div>
        {{/each}}
      </div>
    {{else}}
      <div class="under">
        {{#if game.endedAt}}
          <p class="finished">Game over</p>
          <button class="replay">I wanna kick some cat's ass, pleaaase!</button>
        {{else}}
          <p>Please be patient, you will be able to kick some cat's butt as soon as possible. You can <a href="#">share this page</a> to invite other cat haters</p>
        {{/if}}
      </div>
    {{/if}}
  {{/with}}
</template>
